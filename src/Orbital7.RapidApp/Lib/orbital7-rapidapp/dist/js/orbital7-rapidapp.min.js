function raSetFullHeight(n){n&&setContainerFullHeight($("#"+n))}function setContainerFullHeight(n){var t=n.parent(),i=n.position().top-t.position().top+50;n.css("height","calc(100% - "+i+"px + "+t.css("padding-top")+")")}function raLoadAjaxContent(n,t){if(n){var i=$(t);raShowLoading(i);$.get({url:n,cache:!1,success:function(n){i.html(n);raUpdateBindings()},error:function(n){n.responseText?i.html(n.responseText):i.html("<strong class='red'>ERROR:<\/strong> Content could not be loaded")}})}}function raUpdateAjaxContentUrl(n){$("#"+n+"AjaxContent").attr("data-content-url",url)}function raUpdateAjaxContentSection(n,t){var f="#"+n+"AjaxContent",i=$(f),r,u;t&&i.attr("data-content-url",t);r=i.attr("data-content-url");r||(u=i.attr("data-content-url-script"),eval("url = "+u));raLoadAjaxContent(r,i)}function loadTaskbarItem(n){var i=$(".ra-taskbar"),t=i.findByContentText(n),r,u;t&&(i.find(".ra-taskbar-item-selected").removeClass("ra-taskbar-item-selected").addClass("ra-taskbar-item-selectable"),t.removeClass("ra-taskbar-item-selectable"),t.addClass("ra-taskbar-item-selected"),r=i.data("key"),sessionStorage.setItem("taskbar_"+r+"_selectedTask",n),u=t.attr("data-task-action"),eval(u))}function raRefreshTaskbarItem(){var n=$(".ra-taskbar"),t=n.find(".ra-taskbar-item-selected"),i=t.attr("data-task-action");eval(i)}function loadPagePanel(n){var t=$("#ra-pagePanel");t.attr("data-content-url",n);raLoadAjaxContent(n,t)}function raRefreshPagePanel(){var n=$("#ra-pagePanel"),t=n.attr("data-content-url");raLoadAjaxContent(t,n)}function raUpdateBindings(){$(".ra-fullheight").each(function(){setContainerFullHeight($(this))});$(".ra-behavior-datepicker").datepicker({maxViewMode:2,todayBtn:"linked",autoclose:!0});$(".ra-container-scrollable-x").overlayScrollbars({overflowBehavior:{x:"scroll",y:"hidden"},paddingAbsolute:!0});$(".ra-container-scrollable-y").overlayScrollbars({overflowBehavior:{x:"hidden",y:"scroll"},paddingAbsolute:!0});$(".ra-container-scrollable-both").overlayScrollbars({overflowBehavior:{x:"scroll",y:"scroll"},paddingAbsolute:!0});$("input").keypress(function(n){if(n.which===13){var t=$(this);return t.blur(),t.closest("#ra-dialog").length>0?submitModalDialog():$(":submit").click(),!1}});$(":submit").click(function(){bsDisable(this);$("form").submit()})}function setupDataGrid(n,t,i){var r=$("#"+n);initializeDataGrid(r,t,i)}function initializeDataGrid(n,t,i){var r=n.children("thead"),u=n.children("tbody"),f;n.attr("data-width-set")!=="true"&&(f=r.find("tr:first").children(),colWidthHeading=f.map(function(){return $(this).width()}).get(),r.find("tr").children().each(function(n,t){$(t).width(colWidthHeading[n])}),u.find("tr").children().each(function(n,t){$(t).width(colWidthHeading[n])}),t>0?n.css("height",t+"px"):setContainerFullHeight(n),u.css("height","calc(100% - "+$(f[0]).outerHeight()+"px)"),r.css("display","block"),u.css("display","block"),n.attr("data-width-set",!0),updateDataGrid(n,i))}function updateDataGrid(n,t){n.attr("data-width-set")==="true"&&(n.children("tbody").overlayScrollbars({overflowBehavior:{x:"hidden",y:"scroll"}}),t&&updateDataGridRowColors(n))}function updateDataGridRowColors(n){var t=n.find(".os-content");t.children("tr").addClass("ra-datagrid-row");t.children("tr").removeClass("ra-datagrid-row-alt");t.children("tr:odd").addClass("ra-datagrid-row-alt")}function selectDataGridRow(n){var t=$(n);t.hasClass("ra-datagrid-row-selected")?t.removeClass("ra-datagrid-row-selected"):t.addClass("ra-datagrid-row-selected")}function createSelectedDataGridItemsList(n,t,i,r){var e=$("#"+n),u="",f=0;e.find(".ra-datagrid-row-selected").each(function(){var n=$(this);u+="<input type='hidden' id='"+t+"["+f+"]' name='"+t.replace("_",".")+"["+f+"]' value='"+n.attr("data-row-id")+"' />";i&&(u+="<div class='"+r+"'>"+n.attr("data-row-name")+"<\/div>");f++});$("#selectedDataGridItemsList").html(u)}function raShowTransition(n,t){n||(n="");t||(t="");var i=$("#ra-dialog");i.find(".modal-header").remove();i.find(".modal-footer").remove();i.find("#ra-dialog-body").html("<h2 id='ra-transition-title'>"+n+"<\/h2><h4 id='ra-transition-content' style='color: darkgreen;'>"+t+"<\/h4><div>&nbsp;<\/div><div>&nbsp;<\/div>"+getLoadingDiv()+"<div>&nbsp;<\/div>");i.modal({backdrop:"static",keyboard:!1,show:!0})}function raEnableModalDialogActionButton(){bsEnable($("#ra-dialog-actionbutton"))}function raDisableModalDialogActionButton(){bsDisable($("#ra-dialog-actionbutton"))}function onModalDialogContentUnload(){}function afterModalDialogClosedSuccess(){}function raShowModalDialog(n,t,i,r,u,f,e,o,s){var h,l,y,a,c,v,p;_raBeforeModalDialogSubmit=beforeModalDialogSubmit;_raBeforeModalDialogClose=beforeModalDialogClose;_raAfterModalDialogClose=afterModalDialogClosedSuccess;_raOnModalDialogContentUnload=onModalDialogContentUnload;h=$("#ra-dialog");l="med";o==="full"?l="full":o==="large"?l="lg":o==="medium"?l="med":o==="small"&&(l="sm");$("#ra-dialog-modal").removeClass("ra-dialog-modal-sm").removeClass("ra-dialog-modal-med").removeClass("ra-dialog-modal-lg").removeClass("ra-dialog-modal-full").addClass("ra-dialog-modal-"+l);y=h.find(".modal-header");y.find("#ra-dialog-title").text(i);y.find("#ra-dialog-returnaction").val(t);a=h.find("#ra-dialog-body");raShowLoading(a);c=h.find("#ra-dialog-actionbutton");bsDisable(c);c.text(u);r?c.show():c.hide();v=h.find("#ra-dialog-cancelbutton");v.text(e);f?(v.show(),h.find("#ra-dialog-cancelbutton-corner").show()):(v.hide(),h.find("#ra-dialog-cancelbutton-corner").hide());n.indexOf("%7Bdatagrid-id%7D")!==-1&&(p=$(s).closest(".ra-parent").find(".ra-datagrid-table"),p.length>0&&(n=n.replace("%7Bdatagrid-id%7D",$(p[0]).attr("id"))));h.modal({backdrop:"static",keyboard:f,show:!0});$.get({url:n,cache:!1,success:function(n){updateDialogBodyHtml(h,a,c,!0,n,!1)},error:function(n){n.responseText?updateDialogBodyHtml(h,a,c,!1,n.responseText,!1):updateDialogBodyHtml(h,a,c,!1,"<strong class='red'>ERROR:<\/strong> Dialog content could not be loaded",!1)}})}function beforeModalDialogSubmit(){return!0}function beforeModalDialogClose(){return!0}function submitModalDialog(n){var f,e;if(_raBeforeModalDialogSubmit(n)){_modalDialogSubmitSuccess=!1;_modalDialogSubmitCancelled=!1;var i=$("#ra-dialog"),t=i.find("#ra-dialog-returnaction").val(),r=i.find("#ra-dialog-body"),u=i.find("#ra-dialog-actionbutton");raDisablePanel(i.find("#ra-dialog-modal-content"));i.find("#ra-dialog-processing").show();bsDisable(u);f=r.find("form");e=new FormData(f[0]);postUrl=f.attr("action");$.ajax({type:"POST",cache:!1,async:!0,enctype:"multipart/form-data",contentType:!1,data:e,processData:!1,url:postUrl,success:function(i){_modalDialogSubmitSuccess=!_modalDialogSubmitCancelled;!t&&i&&(t=i);t&&!_modalDialogSubmitCancelled&&(t.startsWith("/")||t.toLowerCase().startsWith("http:")||t.toLowerCase().startsWith("https:")?navigateTo(t):t.includes("(")||t.endsWith(";")||t.includes("'")||t.includes('"')||t.includes("=")?eval(t):raUpdateAjaxContentSection(t));raCloseModalDialog(n)},error:function(n){_modalDialogSubmitCancelled||(n.responseText?updateDialogBodyHtml(i,r,u,!0,n.responseText,!0):updateDialogBodyHtml(i,r,u,!0,"<strong class='red'>ERROR "+n.status+":<\/strong > Dialog was unable to POST",!0))}})}}function raCloseModalDialog(n){_raBeforeModalDialogClose(n)&&(_modalDialogSubmitCancelled=!0,$("#ra-dialog").modal("hide"),_raOnModalDialogContentUnload(),$("#ra-dialog-body").html(""),_modalDialogSubmitSuccess&&setTimeout(function(){_raAfterModalDialogClosedSuccess()},400))}function resizeDialogBody(){var n=$("#ra-dialog-body");if(n){var t=n.height(),i=$(window).height(),r=$(window).height()-t;r<250?n.css("height",i-210+"px"):n.css("height","100%")}}function updateDialogBodyHtml(n,t,i,r,u,f){f&&_raOnModalDialogContentUnload();t.html(u);n.modal("handleUpdate");raUpdateBindings();r?bsEnable(i):bsDisable(i);n.find("#ra-dialog-processing").hide();raEnablePanel(n.find("#ra-dialog-modal-content"));setTimeout(resizeDialogBody,250);setTimeout(function(){t.find(":input:enabled:visible:first").focus().select()},500)}function raAddDynamicTableRow(n,t){var i=$("#"+n);$.get(t).done(function(n){i.append($(n));raUpdateBindings()}).fail(function(n){alert("ERROR: A new Dynamic Table row could not be created. "+n.responseText)}).always(function(){})}function raRemoveDynamicTableRow(n){event.preventDefault();$(n).closest("tr").remove()}function raDisablePanel(n){var t=$(n);t.find(".ra-div-disabled").length===0&&t.prepend("<div class='ra-div-disabled'>&nbsp;<\/div>")}function raEnablePanel(n){$(n).find(".ra-div-disabled").remove()}function bsEnable(n){$(n).removeAttr("disabled").removeClass("disabled")}function bsDisable(n){$(n).attr("disabled",!0).addClass("disabled")}function raUpdateFlipswitchLabel(n){var t=$(n),i="";i=t.prop("checked")?t.data("checked"):t.data("unchecked");t.parent().find("label").html(i)}function raToggleSidebar(){var n=$(".ra-layout-sidebar");n.hasClass("ra-layout-sidebar-visible")?n.removeClass("ra-layout-sidebar-visible"):n.addClass("ra-layout-sidebar-visible")}function raHideSidebar(){$(".ra-layout-sidebar").removeClass("ra-layout-sidebar-visible")}function raShowLoading(n,t){var r=!0,i;(t==="undefined"||t===!1)&&(r=!1);i="<table class='ra-loading-table";r&&(i+=" ra-fullheight");i+="'><tr><td class='ra-loading-table-cell'><img style='width: 100px;' src='/orbital7-rapidapp/dist/images/spinners/ra-spinner-lg.gif' /><\/td><\/tr><\/table>";$(n).html(i)}function getLoadingDiv(){return"<div style='text-align: center;'><img style='width: 100px;' src='/orbital7-rapidapp/dist/images/spinners/ra-spinner-lg.gif' /><\/div>"}function raDropdownValueExists(n,t){var i=!1;return n.find("option").each(function(){if(this.value===t){i=!0;return}}),i}function raUpdateAjaxDropdowns(n,t,i,r){var u=$(n),f=u.val();u.each(function(){$(this).html("<option value=''>Loading...<\/option>")});$.ajax({url:t,dataType:"json",cache:!1,success:function(n){var t="";i&&(t+="<option value=''>"+i+"<\/option>");$.each(n,function(n,i){t+="<option value='"+i.item1+"'>"+i.item2+"<\/option>"});u.each(function(){var n=$(this);n.html(t);f&&n.val(f).attr("selected",!0).siblings("option").removeAttr("selected")});r()},error:function(){alert("Error updating dropdowns content")}})}
/*!
 * tablesort v5.0.2 (2017-11-12)
 * http://tristen.ca/tablesort/demo/
 * Copyright (c) 2017 ; Licensed MIT
!function () { function a(b, c) { if (!(this instanceof a)) return new a(b, c); if (!b || "TABLE" !== b.tagName) throw new Error("Element must be a table"); this.init(b, c || {}) } var b = [], c = function (a) { var b; return window.CustomEvent && "function" == typeof window.CustomEvent ? b = new CustomEvent(a) : (b = document.createEvent("CustomEvent"), b.initCustomEvent(a, !1, !1, void 0)), b }, d = function (a) { return a.getAttribute("data-sort") || a.textContent || a.innerText || "" }, e = function (a, b) { return a = a.trim().toLowerCase(), b = b.trim().toLowerCase(), a === b ? 0 : a < b ? 1 : -1 }, f = function (a, b) { return function (c, d) { var e = a(c.td, d.td); return 0 === e ? b ? d.index - c.index : c.index - d.index : e } }; a.extend = function (a, c, d) { if ("function" != typeof c || "function" != typeof d) throw new Error("Pattern and sort must be a function"); b.push({ name: a, pattern: c, sort: d }) }, a.prototype = { init: function (a, b) { var c, d, e, f, g = this; if (g.table = a, g.thead = !1, g.options = b, a.rows && a.rows.length > 0) if (a.tHead && a.tHead.rows.length > 0) { for (e = 0; e < a.tHead.rows.length; e++)if ("thead" === a.tHead.rows[e].getAttribute("data-sort-method")) { c = a.tHead.rows[e]; break } c || (c = a.tHead.rows[a.tHead.rows.length - 1]), g.thead = !0 } else c = a.rows[0]; if (c) { var h = function () { g.current && g.current !== this && g.current.removeAttribute("aria-sort"), g.current = this, g.sortTable(this) }; for (e = 0; e < c.cells.length; e++)f = c.cells[e], f.setAttribute("role", "columnheader"), "none" !== f.getAttribute("data-sort-method") && (f.tabindex = 0, f.addEventListener("click", h, !1), null !== f.getAttribute("data-sort-default") && (d = f)); d && (g.current = d, g.sortTable(d)) } }, sortTable: function (a, g) { var h = this, i = a.cellIndex, j = e, k = "", l = [], m = h.thead ? 0 : 1, n = a.getAttribute("data-sort-method"), o = a.getAttribute("aria-sort"); if (h.table.dispatchEvent(c("beforeSort")), g || (o = "ascending" === o ? "descending" : "descending" === o ? "ascending" : h.options.descending ? "descending" : "ascending", a.setAttribute("aria-sort", o)), !(h.table.rows.length < 2)) { if (!n) { for (; l.length < 3 && m < h.table.tBodies[0].rows.length;)k = d(h.table.tBodies[0].rows[m].cells[i]), k = k.trim(), k.length > 0 && l.push(k), m++; if (!l) return } for (m = 0; m < b.length; m++)if (k = b[m], n) { if (k.name === n) { j = k.sort; break } } else if (l.every(k.pattern)) { j = k.sort; break } for (h.col = i, m = 0; m < h.table.tBodies.length; m++){ var p, q = [], r = {}, s = 0, t = 0; if (!(h.table.tBodies[m].rows.length < 2)) { for (p = 0; p < h.table.tBodies[m].rows.length; p++)k = h.table.tBodies[m].rows[p], "none" === k.getAttribute("data-sort-method") ? r[s] = k : q.push({ tr: k, td: d(k.cells[h.col]), index: s }), s++; for ("descending" === o ? q.sort(f(j, !0)) : (q.sort(f(j, !1)), q.reverse()), p = 0; p < s; p++)r[p] ? (k = r[p], t++) : k = q[p - t].tr, h.table.tBodies[m].appendChild(k) } } h.table.dispatchEvent(c("afterSort")) } }, refresh: function () { void 0 !== this.current && this.sortTable(this.current, !0) } }, "undefined" != typeof module && module.exports ? module.exports = a : window.Tablesort = a }();
*/
(function(){function n(t,i){if(!(this instanceof n))return new n(t,i);if(!t||t.tagName!=="TABLE")throw new Error("Element must be a table");this.init(t,i||{})}var t=[],i=function(n){var t;return window.CustomEvent&&typeof CustomEvent=="function"?t=new CustomEvent(n):(t=document.createEvent("CustomEvent"),t.initCustomEvent(n,!1,!1,undefined)),t},r=function(n){return n.getAttribute("data-sort")||n.textContent||n.innerText||""},f=function(n,t){return(n=n.trim().toLowerCase(),t=t.trim().toLowerCase(),n===t)?0:n<t?1:-1},u=function(n,t){return function(i,r){var u=n(i.td,r.td);return u===0?t?r.index-i.index:i.index-r.index:u}};n.extend=function(n,i,r){if(typeof i!="function"||typeof r!="function")throw new Error("Pattern and sort must be a function");t.push({name:n,pattern:i,sort:r})};n.prototype={init:function(n,t){var i=this,u,e,r,f,o;if(i.table=n,i.thead=!1,i.options=t,n.rows&&n.rows.length>0)if(n.tHead&&n.tHead.rows.length>0){for(r=0;r<n.tHead.rows.length;r++)if(n.tHead.rows[r].getAttribute("data-sort-method")==="thead"){u=n.tHead.rows[r];break}u||(u=n.tHead.rows[n.tHead.rows.length-1]);i.thead=!0}else u=n.rows[0];if(u){for(o=function(){i.current&&i.current!==this&&i.current.removeAttribute("aria-sort");i.current=this;i.sortTable(this)},r=0;r<u.cells.length;r++)f=u.cells[r],f.setAttribute("role","columnheader"),f.getAttribute("data-sort-method")!=="none"&&(f.tabindex=0,f.addEventListener("click",o,!1),f.getAttribute("data-sort-default")!==null&&(e=f));e&&(i.current=e,i.sortTable(e))}},sortTable:function(n,e){var s=this,d=n.cellIndex,v=f,o="",y=[],h=s.thead?0:1,w=n.getAttribute("data-sort-method"),l=n.getAttribute("aria-sort"),b;if($(s.table).find("tbody").each(function(){var n=OverlayScrollbars(this,{});n&&n.destroy()}),s.table.dispatchEvent(i("beforeSort")),e||(l=l==="ascending"?"descending":l==="descending"?"ascending":s.options.descending?"descending":"ascending",n.setAttribute("aria-sort",l)),$(s.table).find("thead").find(".ra-datagrid-sortaria").invisible(),b="&#9650;",l==="ascending"&&(b="&#9660;"),$(n).find(".ra-datagrid-sortaria").html(b).visible(),!(s.table.rows.length<2)){if(!w){while(y.length<3&&h<s.table.tBodies[0].rows.length)o=r(s.table.tBodies[0].rows[h].cells[d]),o=o.trim(),o.length>0&&y.push(o),h++;if(!y)return}for(h=0;h<t.length;h++)if(o=t[h],w){if(o.name===w){v=o.sort;break}}else if(y.every(o.pattern)){v=o.sort;break}for(s.col=d,h=0;h<s.table.tBodies.length;h++){var a=[],k={},c,p=0,g=0;if(!(s.table.tBodies[h].rows.length<2)){for(c=0;c<s.table.tBodies[h].rows.length;c++)o=s.table.tBodies[h].rows[c],o.getAttribute("data-sort-method")==="none"?k[p]=o:a.push({tr:o,td:r(o.cells[s.col]),index:p}),p++;for(l==="descending"?a.sort(u(v,!0)):(a.sort(u(v,!1)),a.reverse()),c=0;c<p;c++)k[c]?(o=k[c],g++):o=a[c-g].tr,s.table.tBodies[h].appendChild(o)}}updateDataGrid($(s.table),!0);s.table.dispatchEvent(i("afterSort"))}},refresh:function(){this.current!==undefined&&this.sortTable(this.current,!0)}};typeof module!="undefined"&&module.exports?module.exports=n:window.Tablesort=n})(),function(){var n=function(n){return n=n.replace(/\-/g,"/"),n=n.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3"),new Date(n).getTime()||-1};Tablesort.extend("date",function(t){return(t.search(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\.?\,?\s*/i)!==-1||t.search(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/)!==-1||t.search(/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i)!==-1)&&!isNaN(n(t))},function(t,i){return t=t.toLowerCase(),i=i.toLowerCase(),n(i)-n(t)})}(),function(){var n=function(n){return n.replace(/[^\-?0-9.]/g,"")},t=function(n,t){return n=parseFloat(n),t=parseFloat(t),n=isNaN(n)?0:n,t=isNaN(t)?0:t,n-t};Tablesort.extend("number",function(n){return n.match(/^[-+]?[£\x24Û¢´€]?\d+\s*([,\.]\d{0,2})/)||n.match(/^[-+]?\d+\s*([,\.]\d{0,2})?[£\x24Û¢´€]/)||n.match(/^[-+]?(\d)*-?([,\.]){0,1}-?(\d)+([E,e][\-+][\d]+)?%?$/)},function(i,r){return i=n(i),r=n(r),t(r,i)})}();var _raBeforeModalDialogSubmit=beforeModalDialogSubmit,_raBeforeModalDialogClose=beforeModalDialogClose,_raAfterModalDialogClosedSuccess=afterModalDialogClosedSuccess,_raOnModalDialogContentUnload=onModalDialogContentUnload,_modalDialogSubmitSuccess=!1,_modalDialogSubmitCancelled=!1;$(document).ready(function(){$(window).resize(resizeDialogBody);$(".ra-template-item").change(function(){raRecordTemplateModified(this)});$("#ra-dialog").on("hidden.bs.modal",function(){$(this).find("#ra-dialog-body").html("")});raUpdateBindings()});