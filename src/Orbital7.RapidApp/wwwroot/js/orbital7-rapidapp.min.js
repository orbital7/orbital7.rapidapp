function raLoadAjaxContent(n,t){if(n){var i=$(t);raShowLoading(i);$.get({url:n,cache:!1,success:function(n){i.html(n);raUpdateBindings()},error:function(n){n.responseText?i.html(n.responseText):i.html("<strong class='red'>ERROR:<\/strong> Content could not be loaded")}})}}function raUpdateAjaxContentUrl(n){$("#"+n+"AjaxContent").attr("data-content-url",url)}function raUpdateAjaxContentSection(n,t){var f="#"+n+"AjaxContent",i=$(f),r,u;t&&i.attr("data-content-url",t);r=i.attr("data-content-url");r||(u=i.attr("data-content-url-script"),eval("url = "+u));raLoadAjaxContent(r,i)}function loadTaskbarItem(n){var i=$(".ra-taskbar"),t=i.findByContentText(n),r,u;t&&(i.find(".ra-taskbar-item-selected").removeClass("ra-taskbar-item-selected").addClass("ra-taskbar-item-selectable"),t.removeClass("ra-taskbar-item-selectable"),t.addClass("ra-taskbar-item-selected"),r=i.data("key"),sessionStorage.setItem("taskbar_"+r+"_selectedTask",n),u=t.attr("data-task-action"),eval(u))}function raRefreshTaskbarItem(){var n=$(".ra-taskbar"),t=n.find(".ra-taskbar-item-selected"),i=t.attr("data-task-action");eval(i)}function loadPagePanel(n){var t=$("#ra-pagePanel");t.attr("data-content-url",n);raLoadAjaxContent(n,t)}function raRefreshPagePanel(n){var t=$("#ra-pagePanel"),i;n&&t.attr("data-content-url",n);i=t.attr("data-content-url");raLoadAjaxContent(i,t)}function raUpdateBindings(){$(".ra-container-scrollable-x").overlayScrollbars({overflowBehavior:{x:"scroll",y:"hidden"},paddingAbsolute:!0});$(".ra-container-scrollable-y").overlayScrollbars({overflowBehavior:{x:"hidden",y:"scroll"},paddingAbsolute:!0});$(".ra-container-scrollable-both").overlayScrollbars({overflowBehavior:{x:"scroll",y:"scroll"},paddingAbsolute:!0});$("input").keypress(function(n){if(n.which===13){var t=$(this);return t.blur(),t.closest("#ra-dialog").length>0?submitModalDialog():$(":submit").click(),!1}});$(":submit").click(function(){bsDisable(this);$("form").submit()})}function setupDataGrid(n,t,i){var r=$("#"+n);t>0&&r.css("height",t+"px");i&&updateDataGridRowColors(r)}function updateDataGridRowColors(n){var t=n.find("tbody");t.children("tr").addClass("ra-datagrid-row");t.children("tr").removeClass("ra-datagrid-row-alt");t.children("tr:odd").addClass("ra-datagrid-row-alt")}function raShowTransition(n,t){n||(n="");t||(t="");var i=$("#ra-dialog");i.find(".modal-header").remove();i.find(".modal-footer").remove();i.find("#ra-dialog-body").html("<h2 id='ra-transition-title'>"+n+"<\/h2><h4 id='ra-transition-content' style='color: darkgreen;'>"+t+"<\/h4><div>&nbsp;<\/div><div>&nbsp;<\/div>"+getLoadingDiv()+"<div>&nbsp;<\/div>");i.modal({backdrop:"static",keyboard:!1,show:!0})}function raEnableModalDialogActionButton(){bsEnable($("#ra-dialog-actionbutton"))}function raDisableModalDialogActionButton(){bsDisable($("#ra-dialog-actionbutton"))}function onModalDialogContentUnload(){}function afterModalDialogClosedSuccess(){}function raShowModalDialog(n,t,i,r,u,f,e,o,s){var h,l,y,a,c,v,p;_raBeforeModalDialogSubmit=beforeModalDialogSubmit;_raBeforeModalDialogClose=beforeModalDialogClose;_raAfterModalDialogClose=afterModalDialogClosedSuccess;_raOnModalDialogContentUnload=onModalDialogContentUnload;h=$("#ra-dialog");l="med";o==="full"?l="full":o==="extralarge"?l="xl":o==="large"?l="lg":o==="medium"?l="med":o==="small"&&(l="sm");$("#ra-dialog-modal").removeClass("ra-dialog-modal-sm").removeClass("ra-dialog-modal-med").removeClass("ra-dialog-modal-lg").removeClass("ra-dialog-modal-xl").removeClass("ra-dialog-modal-full").addClass("ra-dialog-modal-"+l);y=h.find(".modal-header");y.find("#ra-dialog-title").text(i);y.find("#ra-dialog-returnaction").val(t);a=h.find("#ra-dialog-body");raShowLoading(a);c=h.find("#ra-dialog-actionbutton");bsDisable(c);c.text(u);r?c.show():c.hide();v=h.find("#ra-dialog-cancelbutton");v.text(e);f?(v.show(),h.find("#ra-dialog-cancelbutton-corner").show()):(v.hide(),h.find("#ra-dialog-cancelbutton-corner").hide());n.indexOf("%7Bdatagrid-id%7D")!==-1&&(p=$(s).closest(".ra-parent").find(".ra-datagrid-table"),p.length>0&&(n=n.replace("%7Bdatagrid-id%7D",$(p[0]).attr("id"))));h.modal({backdrop:"static",keyboard:f,show:!0,focus:!1});$.get({url:n,cache:!1,success:function(n){updateDialogBodyHtml(h,a,c,!0,n,!1)},error:function(n){n.responseText?updateDialogBodyHtml(h,a,c,!1,n.responseText,!1):updateDialogBodyHtml(h,a,c,!1,"<strong class='red'>ERROR:<\/strong> Dialog content could not be loaded",!1)}})}function beforeModalDialogSubmit(){return!0}function beforeModalDialogClose(){return!0}function submitModalDialog(n){var f,e;if(_raBeforeModalDialogSubmit(n)){_modalDialogSubmitSuccess=!1;_modalDialogSubmitCancelled=!1;var i=$("#ra-dialog"),t=i.find("#ra-dialog-returnaction").val(),r=i.find("#ra-dialog-body"),u=i.find("#ra-dialog-actionbutton");raDisablePanel(i.find("#ra-dialog-modal-content"));i.find("#ra-dialog-processing").show();bsDisable(u);f=r.find("form");e=new FormData(f[0]);postUrl=f.attr("action");$.ajax({type:"POST",cache:!1,"async":!0,enctype:"multipart/form-data",contentType:!1,data:e,processData:!1,url:postUrl,success:function(i){_modalDialogSubmitSuccess=!_modalDialogSubmitCancelled;!t&&i&&(t=i);t&&!_modalDialogSubmitCancelled&&(t.startsWith("/")||t.toLowerCase().startsWith("http:")||t.toLowerCase().startsWith("https:")?navigateTo(t):t.includes("(")||t.endsWith(";")||t.includes("'")||t.includes('"')||t.includes("=")?eval(t):raUpdateAjaxContentSection(t));raCloseModalDialog(n)},error:function(n){_modalDialogSubmitCancelled||(n.responseText?updateDialogBodyHtml(i,r,u,!0,n.responseText,!0):updateDialogBodyHtml(i,r,u,!0,"<strong class='red'>ERROR "+n.status+":<\/strong > Dialog was unable to POST",!0))}})}}function raCloseModalDialog(n){_raBeforeModalDialogClose(n)&&(_modalDialogSubmitCancelled=!0,$("#ra-dialog").modal("hide"),_raOnModalDialogContentUnload(),$("#ra-dialog-body").html(""),_modalDialogSubmitSuccess&&setTimeout(function(){_raAfterModalDialogClosedSuccess()},400))}function resizeDialogBody(){var n=$("#ra-dialog-body");if(n){var t=n.height(),i=$(window).height(),r=$(window).height()-t;r<250?n.css("height",i-210+"px"):n.css("height","100%")}}function updateDialogBodyHtml(n,t,i,r,u,f){f&&_raOnModalDialogContentUnload();t.html(u);n.modal("handleUpdate");raUpdateBindings();r?bsEnable(i):bsDisable(i);n.find("#ra-dialog-processing").hide();raEnablePanel(n.find("#ra-dialog-modal-content"));setTimeout(resizeDialogBody,250);setTimeout(function(){t.find(":input:enabled:visible:first").focus().select()},500)}function raAddDynamicTableRow(n,t){var i=$("#"+n);$.get(t).done(function(n){i.append($(n));raUpdateBindings()}).fail(function(n){alert("ERROR: A new Dynamic Table row could not be created. "+n.responseText)}).always(function(){})}function raRemoveDynamicTableRow(n){event.preventDefault();$(n).closest("tr").remove()}function raDisablePanel(n){var t=$(n);t.find(".ra-div-disabled").length===0&&t.prepend("<div class='ra-div-disabled'>&nbsp;<\/div>")}function raEnablePanel(n){$(n).find(".ra-div-disabled").remove()}function bsEnable(n){$(n).removeAttr("disabled").removeClass("disabled")}function bsDisable(n){$(n).attr("disabled",!0).addClass("disabled")}function raUpdateFlipswitchLabel(n){var t=$(n),i="";i=t.prop("checked")?t.data("checked"):t.data("unchecked");t.parent().find("label").html(i)}function raToggleSidebar(n){n||(n=".ra-layout-sidebar");var t=$(n);t.hasClass("ra-layout-sidebar-visible")?t.removeClass("ra-layout-sidebar-visible"):t.addClass("ra-layout-sidebar-visible")}function raHideSidebar(n){n||(n=".ra-layout-sidebar");$(n).removeClass("ra-layout-sidebar-visible")}function raShowLoading(n,t){var r=!0,i;(t==="undefined"||t===!1)&&(r=!1);i="<table class='ra-loading-table";r&&(i+=" ");i+="'><tr><td class='ra-loading-table-cell'><img style='width: 100px;' src='/images/ra-spinner-lg.gif' /><\/td><\/tr><\/table>";$(n).html(i)}function getLoadingDiv(){return"<div style='text-align: center;'><img style='width: 100px;' src='/images/ra-spinner-lg.gif' /><\/div>"}function raDropdownValueExists(n,t){var i=!1;return n.find("option").each(function(){if(this.value===t){i=!0;return}}),i}(function(){function n(t,i){if(!(this instanceof n))return new n(t,i);if(!t||t.tagName!=="TABLE")throw new Error("Element must be a table");this.init(t,i||{})}var t=[],i=function(n){var t;return window.CustomEvent&&typeof CustomEvent=="function"?t=new CustomEvent(n):(t=document.createEvent("CustomEvent"),t.initCustomEvent(n,!1,!1,undefined)),t},r=function(n){return n.getAttribute("data-sort")||n.textContent||n.innerText||""},e=function(n,t){return(n=n.trim().toLowerCase(),t=t.trim().toLowerCase(),n===t)?0:n<t?1:-1},u=function(n,t){return[].slice.call(n).find(function(n){return n.getAttribute("data-sort-column-key")===t})},f=function(n,t){return function(i,r){var u=n(i.td,r.td);return u===0?t?r.index-i.index:i.index-r.index:u}};n.extend=function(n,i,r){if(typeof i!="function"||typeof r!="function")throw new Error("Pattern and sort must be a function");t.push({name:n,pattern:i,sort:r})};n.prototype={init:function(n,t){var i=this,u,e,r,f,o;if(i.table=n,i.thead=!1,i.options=t,n.rows&&n.rows.length>0)if(n.tHead&&n.tHead.rows.length>0){for(r=0;r<n.tHead.rows.length;r++)if(n.tHead.rows[r].getAttribute("data-sort-method")==="thead"){u=n.tHead.rows[r];break}u||(u=n.tHead.rows[n.tHead.rows.length-1]);i.thead=!0}else u=n.rows[0];if(u){for(o=function(){i.current&&i.current!==this&&i.current.removeAttribute("aria-sort");i.current=this;i.sortTable(this)},r=0;r<u.cells.length;r++)f=u.cells[r],f.setAttribute("role","columnheader"),f.getAttribute("data-sort-method")!=="none"&&(f.tabindex=0,f.addEventListener("click",o,!1),f.getAttribute("data-sort-default")!==null&&(e=f));e&&(i.current=e,i.sortTable(e))}},sortTable:function(n,o){var a=this,w=n.getAttribute("data-sort-column-key"),it=n.cellIndex,b=e,s="",k=[],h=a.thead?0:1,g=n.getAttribute("data-sort-method"),v=n.getAttribute("aria-sort"),nt,c,y;if(a.table.dispatchEvent(i("beforeSort")),o||(v=v==="ascending"?"descending":v==="descending"?"ascending":a.options.descending?"descending":"ascending",n.setAttribute("aria-sort",v)),$(a.table).find("thead").find(".ra-datagrid-sortaria").invisible(),nt="&#9650;",v==="ascending"&&(nt="&#9660;"),$(n).find(".ra-datagrid-sortaria").html(nt).visible(),c=$(a.table).find("tbody"),!(c[0].rows.length<2)){if(!g){while(k.length<3&&h<c[0].rows.length)y=w?u(c[0].rows[h].cells,w):c[0].rows[h].cells[it],s=y?r(y):"",s=s.trim(),s.length>0&&k.push(s),h++;if(!k)return}for(h=0;h<t.length;h++)if(s=t[h],g){if(s.name===g){b=s.sort;break}}else if(k.every(s.pattern)){b=s.sort;break}for(a.col=it,h=0;h<c.length;h++){var p=[],tt={},l,d=0,rt=0;if(!(c[h].rows.length<2)){for(l=0;l<c[h].rows.length;l++)s=c[h].rows[l],s.getAttribute("data-sort-method")==="none"?tt[d]=s:(y=w?u(s.cells,w):s.cells[a.col],p.push({tr:s,td:y?r(y):"",index:d})),d++;for(v==="descending"?p.sort(f(b,!0)):(p.sort(f(b,!1)),p.reverse()),l=0;l<d;l++)tt[l]?(s=tt[l],rt++):s=p[l-rt].tr,c[h].appendChild(s)}}updateDataGridRowColors($(a.table),!0);a.table.dispatchEvent(i("afterSort"))}},refresh:function(){this.current!==undefined&&this.sortTable(this.current,!0)}};typeof module!="undefined"&&module.exports?module.exports=n:window.Tablesort=n})(),function(){Tablesort.extend("date",function(n){return n.search(/(Mon|Tue|Wed|Thu|Fri|Sat|Sun)\.?\,?\s*/i)!==-1||n.search(/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/)!==-1||n.search(/(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)/i)!==-1},function(n,t){return(Date.parse(t)||-1)-(Date.parse(n)||-1)})}(),function(){var n=function(n){return n.replace(/[^\-?0-9.]/g,"")},t=function(n,t){return n=parseFloat(n),t=parseFloat(t),n=isNaN(n)?0:n,t=isNaN(t)?0:t,n-t};Tablesort.extend("number",function(n){return n.match(/^[-+]?[£\x24Û¢´€]?\d+\s*([,\.]\d{0,2})/)||n.match(/^[-+]?\d+\s*([,\.]\d{0,2})?[£\x24Û¢´€]/)||n.match(/^[-+]?(\d)*-?([,\.]){0,1}-?(\d)+([E,e][\-+][\d]+)?%?$/)},function(i,r){return i=n(i),r=n(r),t(r,i)})}();var _raBeforeModalDialogSubmit=beforeModalDialogSubmit,_raBeforeModalDialogClose=beforeModalDialogClose,_raAfterModalDialogClosedSuccess=afterModalDialogClosedSuccess,_raOnModalDialogContentUnload=onModalDialogContentUnload,_modalDialogSubmitSuccess=!1,_modalDialogSubmitCancelled=!1;$(document).ready(function(){$(window).resize(resizeDialogBody);$(".ra-template-item").change(function(){raRecordTemplateModified(this)});$("#ra-dialog").on("hidden.bs.modal",function(){$(this).find("#ra-dialog-body").html("")});raUpdateBindings()});